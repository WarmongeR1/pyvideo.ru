{#
# richard -- video index system
# Copyright (C) 2012, 2013 richard contributors.  See AUTHORS.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
-#}
<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="{{ settings.STATIC_URL }}bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="{{ settings.STATIC_URL }}css/richard.css">
  <link rel="stylesheet" href="{{ settings.STATIC_URL }}css/social.css">
  <link rel="search" type="application/opensearchdescription+xml" title="{{ settings.SITE_TITLE }} search" href="{{ url('videos-opensearch') }}">
  <title>{% block title %}{{ page_title() }}{% endblock %}</title>
{% if meta %}
  {% for meta_name, meta_content in meta %}
    <meta name="{{ meta_name }}" content="{{ meta_content }}">
  {% endfor %}
{% endif %}
  {% block additional_head %}{% endblock %}
</head>
<body>
  {{ browserid_info()|safe }}
  <div class="navbar navbar-inverse">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand" href="{{ url('home') }}">{{ settings.SITE_TITLE }}</a>
        <ul class="nav">
            <li><a href="{{ url('videos-category-list') }}">Categories</a></li>
            <li><a href="{{ url('videos-speaker-list') }}">Speakers</a></li>
            <li><a href="{{ url('pages-page', page='about') }}">About</a></li>
        </ul>

        <ul class="nav pull-right">
            <form class="navbar-search pull-left" action="{{ url('videos-search') }}">
              <input type="hidden" name="models" value="videos.video">
              <input type="text" class="search-query input-large" name="q" placeholder="Search" value="{{ query }}">
            </form>
        </ul>
      </div>
    </div>
  </div>

  <div id="content" class="container">
  {% if notifications -%}
    <div class="row">
      <div class="span12">
    {% for n in notifications -%}
      <div class="alert alert-info">
        <i class="icon-info-sign"></i> <strong>{{ n.interjection }}</strong>
        {{ n.text|md }}
      </div>
    {%- endfor %}
      </div>
    </div>
  {%- endif %}

    {# TODO: messages #}
    {# TODO: breadcrumbs #}

    {% block content %}{% endblock %}

    <div id="footer">
        <ul class="social-likes">
            <li class="github" title="Fork me on GitHub">GitHub</li>
            <li class="facebook" title="Share link on Facebook">Facebook</li>
            <li class="twitter" data-via="coagulant" title="Share link on Twitter">Twitter</li>
            <li class="plusone" title="Share link on Google+">Google+</li>
        </ul>
            <script>
                var socialLikesButtons = {
                    github: {
                        counterUrl: 'https://api.github.com/repos/coagulant/pyvideo.ru?callback=?',
                        convertNumber: function(data) {
                            return data.data.watchers_count;
                        },
                        clickUrl: 'https://github.com/coagulant/pyvideo.ru'
                    }
                };
            </script>
    </div>
  </div>

  {% block additional_body %}
  {% endblock %}

  {% block site_js %}
  <script type="text/javascript" src="{{ settings.STATIC_URL }}js/jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="{{ settings.STATIC_URL }}bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="{{ settings.STATIC_URL }}js/social.js"></script>
    {% if not settings.BROWSERID_AUTOLOGIN %}
      <script type="text/javascript" src="{{ settings.STATIC_URL }}browserid/browserid.js"></script>
      <script type="text/javascript" src="https://login.persona.org/include.js"></script>
    {% else %}
      <script type="text/javascript" src="{{ settings.STATIC_URL }}js/browserid-mock.js"></script>
    {% endif %}

  {% endblock %}
</body>
</html>
